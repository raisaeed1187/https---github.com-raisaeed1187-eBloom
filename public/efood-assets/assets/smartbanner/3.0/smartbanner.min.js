/**
 * Smartbanner v3.0.0
 * Git: git+https://github.com/deliveryhero/mkt-smartbanner.git
 * License: UNLICENSED
 * Generated on October 5th 2020, 5:46:55 pm
 * Author: Delivery Hero - Marketing Tech
 */

!function(){function p(e,t){var o;for(o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}function u(){var e=navigator.userAgent||navigator.vendor||window.opera;return/windows/i.test(e)?"Windows Phone":/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":"unknown"}function h(){var e=window.location.href;return!0===this.options.global.debugMode&&e.match(/\?debug_url=/g)&&(e=e.slice(e.indexOf("?")+1).replace("debug_url=",""),document.getElementById("debug_iframe").setAttribute("src",e)),e}function m(e,t){if(attribute=this.options.attach.attachLinkTo,"object"!=typeof attribute)return!0===this.options.global.debugMode&&console.log("%cUnrecognized attributes data type","color: red"),!1;available_attributes=["src","href","value","innerText","action"];for(var o=0;o<attribute.length;o++)-1===available_attributes.indexOf(attribute[o])&&!0===this.options.global.debugMode&&console.log("%cUnrecognized attribute "+attribute[o],"color: red");for(var n=0;n<available_attributes.length;n++)-1!==attribute.indexOf(available_attributes[n])&&(t[available_attributes[n]]=e);return!0}function b(e){var t=document.createElement("link");t.href=e,t.type="text/css",t.rel="stylesheet",t.media="screen,print",document.getElementsByTagName("head")[0].appendChild(t)}function f(e){if(element=[],"string"!=typeof e)return element;if(e.startsWith("#")){if(element[0]=document.getElementById(e.substring(1)),null===element)return!0===this.options.global.debugMode&&console.log("%cSelector doesn't exist","color:red;"),element}else element=e.startsWith(".")?document.getElementsByClassName(e.substring(1)):document.getElementsByTagName(e),element.length<=0&&!0===this.options.global.debugMode&&console.log("%cSelector doesn't exist","color:red;");return element}this.Smartbanner=function(){this._version="3.0",this._scriptDomain="//smartbanner.deliveryhero.net";this.options={global:p({debugMode:!1,defaultCss:!0,customCss:!0},arguments[0])},!0===this.options.global.debugMode&&(console.log("%cSmartbanner.js v"+this._version+" is in debug mode\nPlease change parameter debugMode to 'false' to hide all log alerts","color: blue"),console.log(this)),this._envTest=function(){{if("undefined"==typeof Storage)return!0===this.options.global.debugMode&&console.log("%cBrowser doesn't support Storage! Script stopped.","color: red"),!1;if(sessionStorage.hide_smartbanner)return!0===this.options.global.debugMode&&console.log("%cWindow.sessionStorage has 'hide_smartbanner' entry with 'true' value. Script stopped.\nPlease clear the sessionStorage and try again.","color: blue"),!1}if(!1===function(){var e=!1;(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(e=!0);return e}())return!0===this.options.global.debugMode&&console.log("%cScript is not running under mobile OS. Script stopped.","color: orange"),!1;var e=u();if("iOS"!==e&&"Android"!==e)return!0===this.options.global.debugMode&&console.log("%cScript is not running under supported mobile OS. Script stopped.","color: orange"),!1;!0===this.options.global.debugMode&&console.log("%ccheckEnv - passed!","color:green");return!0}.call(this)},Smartbanner.prototype.attach=function(r,e){if(!1===this._envTest)return!1;var t,o,a=function(){var e="https://app.adjust.com/{TOKEN}?",t=function(){var e=h.call(this),t=[];if(-1===e.indexOf("?"))return t;if(1<e.match(/\?/g).length)return t;var o=e.slice(e.indexOf("?")+1).split("&");if(""===e.split("?")[1])return t;for(var n=0;n<o.length;n++)vars=o[n].split("="),t[vars[0]]=encodeURIComponent(vars[1]);return t}.call(this);t?(void 0!==t.sem_tracker?e+="campaign=sem_"+t.sem_tracker+"&":void 0!==t.utm_campaign&&(e+="campaign="+t.utm_campaign+"&"),void 0!==t.utm_source&&(e+="adgroup="+t.utm_source+"&"),void 0!==t.utm_medium&&(e+="creative="+t.utm_medium+"&"),void 0!==t.utm_id&&(e+="label="+t.utm_id+"&"),void 0!==t.gclid&&(e+="gclid="+t.gclid+"&")):""!==document.referrer&&(e+="campaign=seo&",e+="adgroup="+encodeURIComponent(document.referrer)+"&");return e+="deep_link={DEEPLINK}"}.call(this),n=function(){var e=h.call(this),t=[];t=-1!==e.indexOf("://")?e.split("/")[2]:e.split("/")[0];var o=(t=t.split(":")[0].split("?")[0].split(".")).indexOf("www");-1<o&&t.splice(o.index,1);var n=t.length-1;2<t.length&&t[t.length-2].length<=3&&t.splice(n-1,2,t[n-1]+"."+t[n]);return t}.call(this),l=(o=n)[o.length-2].toLowerCase(),s=(t=n)[t.length-1].toLowerCase(),c=u(),i=this._scriptDomain+"/api/smartbanner"+"?platform="+l+"&domain="+s,d={insertMethod:"append",closeButton:!0,closeButtonId:"newSb_btn_close",attachLinkTo:!1},g=this;if(void 0!==e){if(e instanceof Object==!1)return!0===g.options.global.debugMode&&console.log('%cUnrecognized parameters format. Should be "Object", is: "'+typeof e+'"',"color: red"),!1;this.options.attach=p(d,e)}else this.options.attach=d;!1===this.options.attach.attachLinkTo&&(i+="&template=1"),fetch(i).then(function(e){return 200!==e.status?(!0===g.options.global.debugMode&&console.log("Looks like there was a problem. Status Code: "+e.status),!1):void e.json().then(function(e){if(function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e))return!0===g.options.global.debugMode&&console.log("%cNo smartbanner for "+l+"."+s,"color: orange"),!1;if(tracking_link=a.replace("{TOKEN}",e.token[c.toLowerCase()]).replace("{DEEPLINK}",encodeURIComponent(e.deeplink)),!0===g.options.global.debugMode&&console.log("%cLink output: "+tracking_link,"color: green"),!1!==g.options.attach.attachLinkTo){if(!(g.options.attach.attachLinkTo instanceof Array))return!0===g.options.global.debugMode&&console.log("%cUnrecognized value in 'attachLinkTo' parameter","color: red"),!1;if(0<g.options.attach.attachLinkTo.length)return function(e,t){if("string"!=typeof e||"string"!=typeof t||this.options.attach.attachLinkTo instanceof Array==!1)return!1;var o=f.call(this,t);if(0<o.length)for(var n=0;n<o.length;n++)m.call(this,e,o[n]);return!0}.call(g,tracking_link,r,g.options.attach.attachLinkTo)}var t,o=e.template;if(null===o)return!0===g.options.global.debugMode&&console.log("%cTemplate file not found!","color: orange"),!1;if(o=o.replace("{LOGO_SRC}",e.appstore_data.artworkUrl100),o=function(e,t,o){for(var n=e.split("{{"),i=[],r="",a=0;a<n.length;a++)-1!==n[a].indexOf("}}")&&i.push(n[a].split("}")[0]);if(0===i.length)return e;for(var l=0;l<i.length;l++){for(var s=i[l].split("|"),c=0;c<s.length;c++){var d=s[c].split(":");d[0]=d[0].toLowerCase().trim(),d[1]=d[1].trim(),d[0]===t.toLowerCase()||d[0]===o.toLowerCase()?e=e.replace("{{"+i[l]+"}}",d[1]):"default"===d[0]&&(r=d[1])}-1!==e.indexOf("{{"+i[l]+"}}")&&(e=e.replace("{{"+i[l]+"}}",r),!0===this.options.global.debugMode&&""===r&&console.warn("{{"+i[l]+"}} phrase is not match domain pattern. DEFAULT value missing!")),r=""}return e}.call(g,o,s,c),null!=e.appstore_id){for(var n=" ",i=0;i<e.appstore_data.averageUserRating.toFixed();i++)n+='\x3c!-- SVG: Single star --\x3e<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 15 15" width="15" height="15"><path d="M0.4 5.13C0.23 5.15 0.08 5.27 0.02 5.44C-0.04 5.61 0.02 5.79 0.15 5.91C1.55 7.19 3.67 9.11 3.67 9.11C3.66 9.11 3.09 11.91 2.7 13.78C2.67 13.94 2.73 14.12 2.88 14.23C3.02 14.34 3.21 14.34 3.36 14.25C5.02 13.31 7.5 11.9 7.5 11.9C7.5 11.9 9.98 13.31 11.63 14.26C11.78 14.34 11.97 14.34 12.12 14.23C12.27 14.12 12.33 13.94 12.29 13.78C11.91 11.91 11.33 9.11 11.33 9.11C11.33 9.11 13.44 7.19 14.85 5.91C14.98 5.79 15.03 5.61 14.98 5.44C14.92 5.27 14.77 5.15 14.6 5.13C12.71 4.92 9.87 4.61 9.87 4.61C9.87 4.61 8.69 2 7.91 0.27C7.83 0.11 7.68 0 7.5 0C7.32 0 7.16 0.11 7.09 0.27C6.31 2 5.13 4.61 5.13 4.61C4.18 4.71 2.29 4.92 0.4 5.13Z"></path></svg>';o=o.replace("{RATING}",n)}else!0===g.options.global.debugMode&&console.log("Appstore API returns 0 results for this platform");o=(o=o.replace("{LINK}",tracking_link)).replace("{MOBILE_OS}",c),t=!0===g.options.global.debugMode?Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,8):g._version,!0===g.options.global.defaultCss&&b.call(g,g._scriptDomain+"/smartbanner/templates/main.css?ver="+t),!0===g.options.global.customCss&&(!0===e.stylesheet?b.call(g,g._scriptDomain+"/smartbanner/templates/"+l+".css?ver="+t):!0===g.options.global.debugMode&&console.log("%cStylesheet file not found!","color: orange")),!0===function(e,t){if(!t)return!0===this.options.global.debugMode&&console.log("%cMissing selector name!","color:red;"),!1;var o=f.call(this,t);if(0===o.length)return!1;return elementChild=document.createElement("div"),elementChild.innerHTML=e,"append"===this.options.attach.insertMethod?(o[0].appendChild(elementChild),!0):"prepend"===this.options.attach.insertMethod?(o[0].insertBefore(elementChild,o.firstChild),!0):(!0===this.options.global.debugMode&&console.log("%cWrong insert method","color: red"),!1)}.call(g,o,r)&&function(){var e=document.getElementById(this.options.attach.closeButtonId);null!==e?(target_selector=e.getAttribute("data-target"),!0===this.options.attach.closeButton?e.addEventListener("click",function(){Smartbanner.prototype.destroy(target_selector)}):(e.remove(),!0===this.options.global.debugMode&&console.log("%cClose button element has been removed from the DOM","color: blue"))):!0===this.options.global.debugMode&&console.log("%cClose button element with the ID '"+this.options.attach.closeButtonId+"' does not exist","color: orange")}.call(g)})}).catch(function(e){!0===g.options.global.debugMode&&console.log("Fetch Error :-S",e)})},Smartbanner.prototype.destroy=function(e){var t=f.call(this,e);if(0<t.length){for(var o=0;o<t.length;o++)t[o].remove();"undefined"!=typeof Storage&&sessionStorage.setItem("hide_smartbanner",!0)}else!0===this.options.global.debugMode&&console.log("%c^^^ Nothing to delete!","color: red")}}();